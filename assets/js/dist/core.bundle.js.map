{
  "version": 3,
  "sources": ["../src/gifts/state.js", "../src/core/species/api.js", "../src/core/career/api.js", "../src/core/traits/service.js", "../src/core/formBuilder/render-details.js", "../src/core/formBuilder/render-profile.js", "../src/core/formBuilder/render-skills.js", "../src/core/formBuilder/render-summary.js", "../src/core/formBuilder/form-builder.js", "../src/core/formBuilder/index.js", "../src/core/main/builder-ui.js", "../src/core/traits/events.js", "../src/core/traits/index.js", "../src/core/species/render.js", "../src/core/species/events.js", "../src/core/species/index.js", "../src/core/skills/render.js", "../src/core/career/render.js", "../src/core/career/events.js", "../src/core/career/index.js", "../src/gifts/api.js", "../src/gifts/local-knowledge.js", "../src/gifts/language.js", "../src/gifts/free-choices.js", "../src/gifts/index.js", "../src/core/skills/events.js", "../src/core/skills/index.js", "../src/core/summary/utils.js", "../src/core/summary/api.js", "../src/core/summary/index.js", "../src/core/main/builder-refresh.js", "../src/core/main/builder-load.js", "../src/core/main/builder-save.js", "../src/core/main/builder-events.js", "../src/core/main/index.js", "../src/core/index.js"],
  "sourcesContent": ["// assets/js/src/gifts/state.js\r\n\r\nimport FormBuilderAPI from '../core/formBuilder';\r\n\r\nconst State = {\r\n  // currently selected free\u2010gift IDs\r\n  selected: [],\r\n\r\n  // the last fetched gift objects (with name, manifold, requires\u2026)\r\n  gifts: [],\r\n\r\n  /**\r\n   * Pull any previously saved freeGifts from the builder\u2019s data.\r\n   */\r\n  init() {\r\n    const data = FormBuilderAPI.getData();\r\n    this.selected = Array.isArray(data.freeGifts)\r\n      ? data.freeGifts\r\n      : ['', '', ''];\r\n  },\r\n\r\n  /**\r\n   * Update one slot and persist back into FormBuilder\u2019s data.\r\n   */\r\n  set(index, id) {\r\n    this.selected[index] = id;\r\n    const data = FormBuilderAPI.getData();\r\n    data.freeGifts = this.selected;\r\n  },\r\n\r\n  /**\r\n   * Merge incoming gift objects into our master list,\r\n   * keeping manifold, requires, etc.\r\n   */\r\n  setList(giftList = []) {\r\n    giftList.forEach(g => {\r\n      const idStr = String(g.id);\r\n      const idx   = this.gifts.findIndex(x => String(x.id) === idStr);\r\n      if (idx > -1) {\r\n        // update existing object\r\n        this.gifts[idx] = { ...this.gifts[idx], ...g };\r\n      } else {\r\n        // add new gift\r\n        this.gifts.push(g);\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Find one gift object by its ID.\r\n   */\r\n  getGiftById(id) {\r\n    return this.gifts.find(g => String(g.id) === String(id));\r\n  }\r\n};\r\n\r\n// expose globally for debugging\r\nwindow.CG_FreeChoicesState = State;\r\n\r\nexport default State;\r\n", "// assets/js/src/core/species/api.js\r\nconst $ = window.jQuery;\r\n\r\nconst SpeciesAPI = {\r\n  /**\r\n   * Populate the #cg-species dropdown.\r\n   */\r\n  loadSpeciesList(cb) {\r\n    const $sel = $('#cg-species').html('<option value=\"\">\u2014 Select Species \u2014</option>');\r\n\r\n    $.post(CG_Ajax.ajax_url, {\r\n      action:   'cg_get_species_list',\r\n      security: CG_Ajax.nonce\r\n    })\r\n    .done(res => {\r\n      if (!res.success) return;\r\n      // note: we're now using `name` (aliased in PHP) instead of `ct_species_name`\r\n      res.data.forEach(({ id, name }) => {\r\n        $sel.append(`<option value=\"${id}\">${name}</option>`);\r\n      });\r\n    })\r\n    .always(() => {\r\n      if (typeof cb === 'function') cb();\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Fetch the full profile for one species (gifts, skills, etc).\r\n   */\r\n  loadSpeciesProfile(speciesId, cb) {\r\n    $.post(CG_Ajax.ajax_url, {\r\n      action:   'cg_get_species_profile',\r\n      id:        speciesId,\r\n      security: CG_Ajax.nonce\r\n    })\r\n    .done(res => {\r\n      if (res.success && typeof cb === 'function') {\r\n        cb(res.data);\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nexport default SpeciesAPI;\r\n", "// handles all AJAX calls for careers\r\n\r\nconst $ = window.jQuery;\r\n\r\n\r\nconst CareerAPI = {\r\n  loadList(callback) {\r\n    const $sel = $('#cg-career').html('<option value=\"\">\u2014 Select Career \u2014</option>');\r\n\r\n    $.post(CG_Ajax.ajax_url, {\r\n      action:   'cg_get_career_list',\r\n      security: CG_Ajax.nonce\r\n    })\r\n    .done(res => {\r\n      if (res.success) {\r\n        res.data.forEach(item =>\r\n          $sel.append(`<option value=\"${item.id}\">${item.name}</option>`)\r\n        );\r\n      }\r\n    })\r\n    .always(() => {\r\n      if (typeof callback === 'function') callback();\r\n    });\r\n  },\r\n\r\n  loadGifts(careerId, callback) {\r\n    $.post(CG_Ajax.ajax_url, {\r\n      action:   'cg_get_career_gifts',\r\n      id:       careerId,\r\n      security: CG_Ajax.nonce\r\n    })\r\n    .done(res => {\r\n      if (res.success && typeof callback === 'function') {\r\n        callback(res.data);\r\n      }\r\n    });\r\n  },\r\n\r\n//  loadEligibleExtraCareers(giftIds, callback) {\r\n//    $.post(CG_Ajax.ajax_url, {\r\n//      action:   'cg_get_eligible_extra_careers',\r\n//      gifts:    giftIds,\r\n//      security: CG_Ajax.nonce\r\n//    })\r\n//    .done(res => {\r\n//      if (res.success && typeof callback === 'function') {\r\n//        callback(res.data);\r\n//      }\r\n//    });\r\n//  }\r\n};\r\n\r\nexport default CareerAPI;\r\n", "// assets/js/src/core/traits/service.js\r\n\r\nimport GiftsState     from '../../gifts/state.js';\r\nimport SpeciesService from '../species/api.js';\r\nimport CareerService  from '../career/api.js';\r\n\r\nconst DIE_ORDER = ['d4','d6','d8','d10','d12'];\r\n\r\n/**\r\n * Map of gift IDs \u2192 traitKey\r\n * (these IDs correspond to \u201Cincreased trait\u201D gifts)\r\n */\r\nconst BOOSTS = {\r\n  78:  'will',\r\n  89:  'speed',\r\n  85:  'body',\r\n  100: 'mind',\r\n  224: 'trait_species',\r\n  223: 'trait_career'\r\n};\r\n\r\nconst TRAITS     = ['will','speed','body','mind','trait_species','trait_career'];\r\nconst DICE_TYPES = ['d8','d6','d4'];\r\nconst MAX_COUNT  = { d8:2, d6:3, d4:1 };\r\n\r\nconst TraitsService = {\r\n  TRAITS,\r\n  DICE_TYPES,\r\n\r\n  /**\r\n   * Build a map: { traitKey: totalBoostCount }\r\n   * counting free, species, and career gifts, including any manifold multipliers.\r\n   */\r\n  calculateBoostMap() {\r\n    const map = {};\r\n\r\n    /** \r\n     * Look up one gift, see if it\u2019s in BOOSTS, then add\r\n     * its manifold count (default 1) to that traitKey in map.\r\n     */\r\n    function addGift(giftId) {\r\n      if (!giftId) return;\r\n      // Find the full gift object (with manifold, requires, etc)\r\n      const gift = GiftsState.getGiftById(giftId);\r\n      if (!gift) return;\r\n\r\n      // Only process if it\u2019s a known boost gift\r\n      const traitKey = BOOSTS[gift.id];\r\n      if (!traitKey) return;\r\n\r\n      // How many steps does this gift boost? `ct_gifts_manifold` or 1\r\n      const count = parseInt(gift.ct_gifts_manifold, 10) || 1;\r\n\r\n      map[traitKey] = (map[traitKey] || 0) + count;\r\n    }\r\n\r\n    // 1) Free\u2010choice gifts\r\n    GiftsState.selected.forEach(addGift);\r\n\r\n    // 2) Species gifts (profile.gift_id_1 \u2026 gift_id_3)\r\n    const sp = SpeciesService.currentProfile;\r\n    if (sp) {\r\n      ['gift_id_1','gift_id_2','gift_id_3'].forEach(key => {\r\n        addGift(sp[key]);\r\n      });\r\n    }\r\n\r\n    // 3) Career gifts\r\n    const cp = CareerService.currentProfile;\r\n    if (cp) {\r\n      ['gift_id_1','gift_id_2','gift_id_3'].forEach(key => {\r\n        addGift(cp[key]);\r\n      });\r\n    }\r\n\r\n    console.log('[Traits] boost map \u2192', map);\r\n    return map;\r\n  },\r\n\r\n  /**\r\n   * Enforce dice\u2010count limits on the trait selects.\r\n   */\r\n  enforceCounts() {\r\n    const $    = window.jQuery;\r\n    const freq = { d8:0, d6:0, d4:0 };\r\n\r\n    $('.cg-trait-select').each(function(){\r\n      const v = $(this).val();\r\n      if (v && v in freq) freq[v]++;\r\n    });\r\n\r\n    $('.cg-trait-select').each(function(){\r\n      const $sel    = $(this);\r\n      const current = $sel.val() || '';\r\n      let options   = '<option value=\"\">\u2014 Select \u2014</option>';\r\n\r\n      DICE_TYPES.forEach(die => {\r\n        if (freq[die] < MAX_COUNT[die] || current === die) {\r\n          const sel = current === die ? ' selected' : '';\r\n          options += `<option value=\"${die}\"${sel}>${die}</option>`;\r\n        }\r\n      });\r\n\r\n      $sel.html(options);\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Update the \u201Cadjusted\u201D labels under each trait select.\r\n   */\r\n  updateAdjustedDisplays() {\r\n    const $      = window.jQuery;\r\n    const boosts = this.calculateBoostMap();\r\n\r\n    TRAITS.forEach(traitKey => {\r\n      const $sel   = $(`#cg-${traitKey}`);\r\n      const base   = $sel.val() || 'd4';\r\n      const idx    = DIE_ORDER.indexOf(base);\r\n      const count  = boosts[traitKey] || 0;\r\n      const boosted = DIE_ORDER[Math.min(idx + count, DIE_ORDER.length - 1)];\r\n      $(`#cg-${traitKey}-adjusted`).text(boosted);\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Re-run both counts & adjusted displays.\r\n   */\r\n  refreshAll() {\r\n    this.enforceCounts();\r\n    this.updateAdjustedDisplays();\r\n  },\r\n\r\n  /**\r\n   * Get a single trait\u2019s boosted die (for external use).\r\n   */\r\n  getBoostedDie(traitKey) {\r\n    const boosts = this.calculateBoostMap();\r\n    const cnt    = boosts[traitKey] || 0;\r\n    if (!cnt) return '';\r\n    const base = window.jQuery(`#cg-${traitKey}`).val() || 'd4';\r\n    const idx  = DIE_ORDER.indexOf(base);\r\n    return DIE_ORDER[Math.min(idx + cnt, DIE_ORDER.length - 1)];\r\n  }\r\n};\r\n\r\nexport default TraitsService;\r\n", "// assets/js/src/core/formBuilder/render-details.js\r\n\r\nimport TraitsService from '../traits/service.js';\r\n\r\nconst TRAITS = TraitsService.TRAITS;       // [\"will\",\"speed\",\"body\",\"mind\",\"trait_species\",\"trait_career\"]\r\nconst DICE   = TraitsService.DICE_TYPES;   // [\"d8\",\"d6\",\"d4\"]\r\n\r\nfunction escape(val) {\r\n  const s = val == null ? '' : String(val);\r\n  return s\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#39;');\r\n}\r\n\r\nfunction capitalize(str = '') {\r\n  return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n\r\nexport default {\r\n  renderTabs() {\r\n    return `\r\n      <ul class=\"cg-tabs\">\r\n        <li data-tab=\"tab-traits\" class=\"active\">Details & Traits</li>\r\n        <li data-tab=\"tab-profile\">Profile: Species, Career & Gifts</li>\r\n        <li data-tab=\"tab-skills\">Skills</li>\r\n        <li data-tab=\"tab-summary\">Summary</li>\r\n      </ul>\r\n    `;\r\n  },\r\n\r\n  renderContent(data = {}) {\r\n    // Build each trait\u2019s <select> using the full DICE array\u2014\r\n    // no pool removal, so every option is always rendered.\r\n    const traitFields = TRAITS.map(trait => {\r\n      const val   = String(data[trait] ?? '');\r\n      const label = trait === 'trait_species' ? 'Species'\r\n                  : trait === 'trait_career'  ? 'Career'\r\n                  : capitalize(trait);\r\n\r\n      const options = DICE.map(die => {\r\n        const sel = (die === val) ? ' selected' : '';\r\n        return `<option value=\"${die}\"${sel}>${die}</option>`;\r\n      }).join('');\r\n\r\n      return `\r\n        <div class=\"cg-trait\">\r\n          <label>${label} <small>(choose one)</small></label>\r\n          <select id=\"cg-${trait}\" class=\"cg-trait-select\">\r\n            <option value=\"\">&mdash; Select &mdash;</option>\r\n            ${options}\r\n          </select>\r\n          <div\r\n            class=\"trait-adjusted\"\r\n            id=\"cg-${trait}-adjusted\"\r\n            style=\"color:#0073aa;font-weight:bold;\"\r\n          ></div>\r\n        </div>\r\n      `;\r\n    }).join('');\r\n\r\n    return `\r\n      <div id=\"tab-traits\" class=\"tab-panel active\">\r\n        <div class=\"cg-details-panel\">\r\n\r\n          <div class=\"cg-details-box\">\r\n            <h3>Details</h3>\r\n            <div class=\"cg-profile-grid\">\r\n              <div>\r\n                <label>Character Name</label>\r\n                <input type=\"text\" id=\"cg-name\" value=\"${escape(data.name)}\" required />\r\n              </div>\r\n              <div>\r\n                <label>Player Name</label>\r\n                <input type=\"text\" id=\"cg-player-name\" value=\"${escape(data.player_name)}\" />\r\n              </div>\r\n\r\n              <div>\r\n                <label>Gender</label>\r\n                <select id=\"cg-gender\">\r\n                  <option value=\"\">&mdash; Select &mdash;</option>\r\n                  <option value=\"Male\"     ${data.gender === 'Male'     ? 'selected' : ''}>Male</option>\r\n                  <option value=\"Female\"   ${data.gender === 'Female'   ? 'selected' : ''}>Female</option>\r\n                  <option value=\"Nonbinary\"${data.gender === 'Nonbinary'? 'selected' : ''}>Nonbinary</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label>Age</label>\r\n                <input type=\"text\" id=\"cg-age\" value=\"${escape(data.age)}\" required />\r\n              </div>\r\n            </div>\r\n\r\n            <label>Motto</label>\r\n            <input type=\"text\" id=\"cg-motto\" value=\"${escape(data.motto)}\" />\r\n\r\n            <label>Goal 1</label>\r\n            <input type=\"text\" id=\"cg-goal1\" value=\"${escape(data.goal1)}\" />\r\n            <label>Goal 2</label>\r\n            <input type=\"text\" id=\"cg-goal2\" value=\"${escape(data.goal2)}\" />\r\n            <label>Goal 3</label>\r\n            <input type=\"text\" id=\"cg-goal3\" value=\"${escape(data.goal3)}\" />\r\n          </div>\r\n\r\n          <div class=\"cg-traits-box\">\r\n            <h3>Traits</h3>\r\n            <div class=\"cg-profile-grid\">\r\n              ${traitFields}\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"cg-text-box\">\r\n            <h3>Description & Backstory</h3>\r\n            <label>Description</label>\r\n            <textarea id=\"cg-description\">${escape(data.description)}</textarea>\r\n            <label>Backstory</label>\r\n            <textarea id=\"cg-backstory\">${escape(data.backstory)}</textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n};\r\n", "// assets/js/src/core/formBuilder/render-profile.js\r\n\r\n/**\r\n * \u201CProfile\u201D tab & panel\r\n * Species, Career & Gifts all together\r\n */\r\n\r\nexport default {\r\n  renderContent(data = {}) {\r\n    return `\r\n      <div id=\"tab-profile\" class=\"tab-panel\">\r\n\r\n        <div class=\"cg-profile-box\">\r\n          <h3>Species and Career</h3>\r\n          <label for=\"cg-species\">Species</label>\r\n          <select \r\n            id=\"cg-species\" \r\n            class=\"cg-profile-select\" \r\n            data-selected=\"${data.species_id || ''}\"\r\n          ></select>\r\n          <ul id=\"species-gifts\" class=\"cg-gift-item\"></ul>\r\n\r\n          <label for=\"cg-career\">Career</label>\r\n          <select \r\n            id=\"cg-career\" \r\n            class=\"cg-profile-select\" \r\n            data-selected=\"${data.career_id || ''}\"\r\n          ></select>\r\n          <div class=\"trait-adjusted\" id=\"cg-trait_career-adjusted\"></div>\r\n          <div id=\"cg-extra-careers\" class=\"cg-profile-grid\"></div>\r\n        </div>\r\n\r\n        <div class=\"cg-profile-box\">\r\n          <h3>Gifts</h3>\r\n          <div class=\"cg-gift-label\">Local Knowledge</div>\r\n          <div id=\"cg-local-knowledge\" class=\"cg-gift-item\"></div>\r\n\r\n          <div class=\"cg-gift-label\">Language</div>\r\n          <div id=\"cg-language\" class=\"cg-gift-item\"></div>\r\n\r\n          <div class=\"cg-gift-label\">Species Gifts</div>\r\n          <ul id=\"species-gift-block\" class=\"cg-gift-item\"></ul>\r\n\r\n          <div class=\"cg-gift-label\">Career Gifts</div>\r\n          <ul id=\"career-gifts\" class=\"cg-gift-item\"></ul>\r\n\r\n          <div class=\"cg-gift-label\">Chosen</div>\r\n          <div id=\"cg-free-choices\" class=\"cg-gift-item\"></div>\r\n        </div>\r\n\r\n      </div>\r\n    `;\r\n  }\r\n};\r\n", "// assets/js/src/core/formBuilder/render-skills.js\r\n\r\nimport SpeciesService from '../species/api.js';\r\nimport CareerService  from '../career/api.js';\r\nimport FormBuilderAPI from '../formBuilder';\r\n\r\nfunction escape(str = '') {\r\n  return String(str)\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#039;');\r\n}\r\n\r\nexport default {\r\n  renderContent(data = {}) {\r\n    const speciesName  = SpeciesService.currentProfile?.species_name || '';\r\n    const careerName   = CareerService.currentProfile?.career_name  || '';\r\n    const extraCareers = data.extraCareers || []; \r\n    const skillList    = data.skillsList || [];\r\n\r\n    // Build header columns\r\n    const careerCols = [`<th>Career: ${escape(careerName)}</th>`]\r\n      .concat(\r\n        extraCareers.map((c,i) =>\r\n          `<th>Career ${i+2}: ${escape(c.name)}</th>`\r\n        )\r\n      ).join('');\r\n\r\n    // Build each skill row\r\n    const rows = skillList.map(skill => `\r\n      <tr data-skill-id=\"${skill.id}\">\r\n        <td>${escape(skill.name)}</td>\r\n        <td class=\"skill-species-die\"></td>\r\n        ${extraCareers.map(() => '<td></td>').join('')}\r\n        <td>\r\n          <input\r\n            type=\"number\"\r\n            class=\"skill-marks\"\r\n            data-skill-id=\"${skill.id}\"\r\n            min=\"0\"\r\n            value=\"${escape(data.skillMarks?.[skill.id]||0)}\"\r\n          />\r\n        </td>\r\n        <td class=\"skill-total\">\u2014</td>\r\n      </tr>\r\n    `).join('');\r\n\r\n    return `\r\n      <div id=\"tab-skills\" class=\"tab-panel\">\r\n        <table id=\"skills-table\" class=\"cg-skills-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Skill Name</th>\r\n              <th>Species: ${escape(speciesName)}</th>\r\n              ${careerCols}\r\n              <th>Skill Marks</th>\r\n              <th>Dice Pool</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${rows}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    `;\r\n  }\r\n};\r\n", "// assets/js/src/core/formBuilder/render-summary.js\r\n\r\n/**\r\n * \u201CSummary\u201D tab & panel skeleton\r\n */\r\nexport default {\r\n  renderContent(data = {}) {\r\n    return `\r\n      <div id=\"tab-summary\" class=\"tab-panel\">\r\n        <div class=\"summary-header\">\r\n          <button id=\"cg-export-pdf\" type=\"button\" class=\"button primary\">\r\n            \uD83D\uDDA8\uFE0F Export to PDF\r\n          </button>\r\n        </div>\r\n        <div id=\"cg-summary-sheet\"></div>\r\n      </div>\r\n    `;\r\n  }\r\n};\r\n", "// assets/js/src/core/formBuilder/form-builder.js\r\nconst $ = window.jQuery;\r\n\r\nimport DetailsTabRenderer   from './render-details.js';\r\nimport ProfileTabRenderer   from './render-profile.js';\r\nimport SkillsTabRenderer    from './render-skills.js';\r\nimport SummaryTabRenderer   from './render-summary.js';\r\n\r\nconst FormBuilder = {\r\n  buildForm(data = {}) {\r\n    console.log('\uD83D\uDEE0\uFE0F FormBuilder.buildForm fired:', data);\r\n\r\n    // 1) Build the HTML into a variable\r\n    const html = `\r\n<form id=\"cg-form\">\r\n\r\n  ${DetailsTabRenderer.renderTabs()}\r\n  <div class=\"cg-tab-wrap\">\r\n    ${DetailsTabRenderer.renderContent(data)}\r\n    ${ProfileTabRenderer.renderContent(data)}\r\n    ${SkillsTabRenderer.renderContent(data)}\r\n    ${SummaryTabRenderer.renderContent(data)}\r\n  </div>\r\n\r\n  <input type=\"hidden\" id=\"cg-id\"     value=\"${data.id || ''}\" />\r\n  <div class=\"cg-form-buttons\">\r\n    <button type=\"button\" class=\"cg-save-button\">\uD83D\uDCBE Save</button>\r\n    <button type=\"button\" class=\"cg-save-button cg-close-after-save\">\uD83D\uDCBE Save & Close</button>\r\n  </div>\r\n</form>`;\r\n\r\n    // 2) AFTER the form is injected into the DOM, give the browser a tick\r\n    //    then read every <select> value out of the rendered HTML:\r\n    setTimeout(() => {\r\n      console.log('\uD83D\uDD3D [buildForm] SELECT VALUES AFTER RENDER:', {\r\n        will:            $('#cg-will').val(),\r\n        speed:           $('#cg-speed').val(),\r\n        body:            $('#cg-body').val(),\r\n        mind:            $('#cg-mind').val(),\r\n        trait_species:   $('#cg-trait_species').val(),\r\n        trait_career:    $('#cg-trait_career').val(),\r\n        profileSpecies:  $('#cg-species').val(),\r\n        profileCareer:   $('#cg-career').val(),\r\n      });\r\n    }, 0);\r\n\r\n    // 3) Return the HTML string to the caller\r\n    return html;\r\n  }\r\n};\r\n\r\nexport default FormBuilder;\r\n", "// assets/js/src/core/formBuilder/index.js\r\n\r\nconst $ = window.jQuery;\r\nimport BuilderUI     from '../main/builder-ui.js';\r\nimport TraitsService from '../traits/service.js';\r\nimport FormBuilder   from './form-builder.js';\r\n\r\nconst FormBuilderAPI = {\r\n  _data:   {},\r\n  isNew:   true,\r\n  hasData: false,\r\n\r\n  /**\r\n   * Initialize the builder state and render the form.\r\n   *\r\n   * @param {Object} payload\r\n   */\r\n  init(payload = {}) {\r\n    this._data   = { ...payload };\r\n    this.isNew   = Boolean(payload.isNew);\r\n    this.hasData = !this.isNew;\r\n\r\n    $('#cg-form-container').html(\r\n      FormBuilder.buildForm(this._data)\r\n    );\r\n  },\r\n\r\n  /**\r\n   * Return a shallow copy of the in-memory data.\r\n   */\r\n  getData() {\r\n    return { ...this._data };\r\n  },\r\n\r\n  /**\r\n   * Read every form field from the DOM into a single payload object,\r\n   * merging in-memory skillMarks to avoid losing them when inputs\r\n   * aren't present on the current tab.\r\n   */\r\n  collectFormData() {\r\n    const d = {};\r\n\r\n    // Preserve existing ID (for updates)\r\n    if (this._data.id) {\r\n      d.id = this._data.id;\r\n    }\r\n\r\n    // Basic fields\r\n    d.name        = $('#cg-name').val();\r\n    d.player_name = $('#cg-player-name').val();\r\n    d.age         = $('#cg-age').val();\r\n    d.gender      = $('#cg-gender').val();\r\n    d.motto       = $('#cg-motto').val();\r\n    d.goal1       = $('#cg-goal1').val();\r\n    d.goal2       = $('#cg-goal2').val();\r\n    d.goal3       = $('#cg-goal3').val();\r\n    d.description = $('#cg-description').val();\r\n    d.backstory   = $('#cg-backstory').val();\r\n\r\n    // Species & Career\r\n    d.species_id = $('#cg-species').val();\r\n    d.career_id  = $('#cg-career').val();\r\n\r\n    // Traits (will, speed, body, mind, trait_species, trait_career)\r\n    TraitsService.TRAITS.forEach(key => {\r\n      d[key] = $(`#cg-${key}`).val();\r\n    });\r\n\r\n    // Skill marks: start with whatever is in-memory,\r\n    // then overwrite from any <input class=\"skill-marks\">\r\n    const mergedMarks = { ...(this._data.skillMarks || {}) };\r\n    $('input.skill-marks').each((i, el) => {\r\n      const skillId = $(el).data('skill-id');\r\n      const val     = parseInt($(el).val(), 10) || 0;\r\n      mergedMarks[skillId] = val;\r\n    });\r\n    d.skillMarks = mergedMarks;\r\n\r\n    // Free\u2010choice gifts\r\n    d.free_gifts = [\r\n      $('#cg-free-choice-0').val() || '',\r\n      $('#cg-free-choice-1').val() || '',\r\n      $('#cg-free-choice-2').val() || ''\r\n    ];\r\n\r\n    return d;\r\n  },\r\n\r\n  /**\r\n   * Save the character via WP-AJAX and optionally close builder.\r\n   *\r\n   * @param {boolean} shouldClose\r\n   * @returns {Promise}\r\n   */\r\n  save(shouldClose = false) {\r\n    const payload = this.collectFormData();\r\n    console.log('[FormBuilderAPI] \u25B6 save()', payload);\r\n\r\n    return $.ajax({\r\n      url:    CG_Ajax.ajax_url,\r\n      method: 'POST',\r\n      data: {\r\n        action:    'cg_save_character',\r\n        character: payload,\r\n        security:  CG_Ajax.nonce\r\n      }\r\n    })\r\n    .done(res => {\r\n      if (!res.success) {\r\n        console.error('[FormBuilderAPI] save.error()', res.data);\r\n        alert('Save failed: ' + res.data);\r\n        return;\r\n      }\r\n\r\n      // Update ID in-memory\r\n      this._data = { ...this._data, id: res.data.id };\r\n      this.isNew   = false;\r\n      this.hasData = true;\r\n\r\n      BuilderUI.markClean();\r\n      if (shouldClose) {\r\n        BuilderUI.closeBuilder();\r\n      }\r\n    })\r\n    .fail((xhr, status, err) => {\r\n      console.error('[FormBuilderAPI] save.fail()', status, err, xhr.responseText);\r\n      alert('Save failed\u2014check console for details.');\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Fetch a list of saved characters (for the Load splash).\r\n   */\r\n  listCharacters() {\r\n    return $.ajax({\r\n      url:    CG_Ajax.ajax_url,\r\n      method: 'POST',\r\n      data: {\r\n        action:   'cg_load_characters',\r\n        security: CG_Ajax.nonce\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Fetch one character\u2019s full data by ID.\r\n   *\r\n   * @param {number|string} id\r\n   */\r\n  fetchCharacter(id) {\r\n    console.log('[FormBuilderAPI] fetchCharacter() called with ID:', id);\r\n    return $.ajax({\r\n      url:    CG_Ajax.ajax_url,\r\n      method: 'POST',\r\n      data: {\r\n        action:   'cg_get_character',\r\n        id,\r\n        security: CG_Ajax.nonce\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nexport default FormBuilderAPI;\r\n", "// assets/js/src/core/main/builder-ui.js\r\n\r\nimport FormBuilderAPI from '../formBuilder';\r\n\r\nconst $ = window.jQuery;\r\nlet isDirty = false;\r\n\r\nfunction openBuilder({ isNew = false, payload = {} } = {}) {\r\n  console.log('[BuilderUI] openBuilder() called with opts:', { isNew, payload });\r\n\r\n  isDirty = false;\r\n  $('#cg-unsaved-confirm, #cg-unsaved-backdrop')\r\n    .hide()\r\n    .css('display', 'none');\r\n\r\n  const data = {\r\n    ...payload,\r\n    isNew\r\n  };\r\n\r\n  FormBuilderAPI.init(data);\r\n\r\n  $('#cg-modal-overlay, #cg-modal')\r\n    .removeClass('cg-hidden')\r\n    .addClass('cg-visible')\r\n    .css('display', 'block');\r\n\r\n  if (isNew) {\r\n    $('#cg-modal .cg-tabs li[data-tab=\"tab-traits\"]').click();\r\n  }\r\n}\r\n\r\nfunction closeBuilder() {\r\n  $('#cg-unsaved-backdrop').hide().css('display', 'none');\r\n  $('#cg-unsaved-confirm')\r\n    .removeClass('cg-visible')\r\n    .addClass('cg-hidden')\r\n    .hide()\r\n    .css('display', 'none');\r\n\r\n  $('#cg-modal, #cg-modal-overlay')\r\n    .removeClass('cg-visible')\r\n    .addClass('cg-hidden')\r\n    .fadeOut(200, () => {\r\n      $('#cg-form-container').empty();\r\n    });\r\n\r\n  isDirty = false;\r\n}\r\n\r\nfunction markDirty()  { isDirty = true;  }\r\nfunction markClean()  { isDirty = false; }\r\nfunction getIsDirty() { return isDirty;  }\r\n\r\nfunction showUnsaved() {\r\n  if (!$('#cg-unsaved-backdrop').length) {\r\n    $('<div id=\"cg-unsaved-backdrop\"></div>').appendTo('body');\r\n  }\r\n\r\n  const $backdrop = $('#cg-unsaved-backdrop');\r\n  const $prompt   = $('#cg-unsaved-confirm');\r\n\r\n  if (!$prompt.parent().is('body')) {\r\n    $prompt.appendTo('body');\r\n  }\r\n\r\n  $backdrop.show().css('display', 'block');\r\n  $prompt.removeClass('cg-hidden').addClass('cg-visible').show().css('display', 'block');\r\n}\r\n\r\nfunction hideUnsaved() {\r\n  $('#cg-unsaved-backdrop').hide().css('display', 'none');\r\n  $('#cg-unsaved-confirm')\r\n    .removeClass('cg-visible')\r\n    .addClass('cg-hidden')\r\n    .hide()\r\n    .css('display', 'none');\r\n}\r\n\r\nexport default {\r\n  openBuilder,\r\n  closeBuilder,\r\n  showUnsaved,\r\n  hideUnsaved,\r\n  markDirty,\r\n  markClean,\r\n  getIsDirty\r\n};\r\n", "// binds DOM events for traits\r\n\r\nimport TraitsService from './service.js';\r\n\r\nconst $ = window.jQuery;\r\nlet bound = false;\r\n\r\nexport default {\r\n  bind() {\r\n    if (bound) return;\r\n    bound = true;\r\n\r\n    // on initial page load (or panel insert)\r\n    $(function(){\r\n      TraitsService.refreshAll();\r\n    });\r\n\r\n    // re-apply limits & labels on any dropdown change\r\n    $(document)\r\n      .off('change', '.cg-trait-select')\r\n      .on('change', '.cg-trait-select', () => {\r\n        TraitsService.refreshAll();\r\n      });\r\n  }\r\n};\r\n", "// public API for Traits\r\n\r\nimport TraitsService from './service.js';\r\nimport TraitsEvents  from './events.js';\r\n\r\nexport default {\r\n  init() {\r\n    // Enforce and display initial trait limits\r\n    TraitsService.refreshAll();\r\n\r\n    // Wire up change handlers\r\n    TraitsEvents.bind();\r\n  },\r\n\r\n  // Expose for other modules\r\n  getBoostedDie: TraitsService.getBoostedDie.bind(TraitsService)\r\n};\r\n", "const $ = window.jQuery;\r\n\r\nexport default {\r\n  renderGifts(profile) {\r\n    const gifts = [\r\n      { label: 'Species Gift One', name: profile.gift_1 },\r\n      { label: 'Species Gift Two', name: profile.gift_2 },\r\n      { label: 'Species Gift Three', name: profile.gift_3 }\r\n    ].filter(g => g.name);\r\n\r\n    const html = gifts\r\n      .map(g => `<li><strong>${g.label}:</strong> ${g.name}</li>`)\r\n      .join('');\r\n\r\n    $('#species-gift-block').html(html);\r\n  },\r\n\r\n  clearUI() {\r\n    $('#species-gift-block').empty();\r\n    $('#cg-species').val('');\r\n  }\r\n};\r\n", "// assets/js/src/core/species/events.js\r\n\r\nimport FormBuilderAPI from '../formBuilder';\r\nimport SpeciesAPI     from './api.js';\r\nimport SpeciesRender  from './render.js';\r\nimport TraitsService  from '../traits/service.js';\r\nimport GiftsState     from '../../gifts/state.js';\r\n\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  bound: false,\r\n\r\n  bind() {\r\n    if (this.bound) return;\r\n    this.bound = true;\r\n\r\n    $(document)\r\n      .off('change', '#cg-species')\r\n      .on('change', '#cg-species', () => {\r\n        const speciesId = $('#cg-species').val();\r\n        const data      = FormBuilderAPI.getData();\r\n\r\n        // Persist selection in builder data\r\n        data.profile = data.profile || {};\r\n        data.profile.species = speciesId;\r\n\r\n        console.log('[SpeciesEvents] selected species \u2192', speciesId);\r\n\r\n        // If no species selected, clear UI and traits\r\n        if (!speciesId) {\r\n          SpeciesAPI.currentProfile = null;\r\n          SpeciesRender.clearUI();\r\n          TraitsService.refreshAll();\r\n          return;\r\n        }\r\n\r\n        // Fetch the full species profile\r\n        SpeciesAPI.loadSpeciesProfile(speciesId, profileData => {\r\n          // Expose for trait calculations\r\n          SpeciesAPI.currentProfile = profileData;\r\n\r\n          // Merge into saved profile\r\n          data.profile = { ...data.profile, ...profileData };\r\n          console.log('[SpeciesEvents] loaded profile \u2192', data.profile);\r\n\r\n          // Prepare species gifts for state (include manifold)\r\n          const spGifts = [1, 2, 3].map(i => {\r\n            const id       = profileData[`gift_id_${i}`];\r\n            const manifold = parseInt(profileData[`manifold_${i}`], 10) || 1;\r\n            return id ? { id, ct_gifts_manifold: manifold } : null;\r\n          }).filter(Boolean);\r\n\r\n          // Merge into central GiftsState\r\n          GiftsState.setList(spGifts);\r\n\r\n          // Render gifts and refresh trait boosts\r\n          SpeciesRender.renderGifts(profileData);\r\n          TraitsService.refreshAll();\r\n        });\r\n      });\r\n  }\r\n};\r\n", "// assets/js/src/core/species/index.js\r\n\r\nimport SpeciesAPI     from './api.js';\r\nimport SpeciesEvents  from './events.js';\r\nimport FormBuilderAPI from '../formBuilder';\r\n\r\n// make sure jQuery\u2019s $ is defined\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  init() {\r\n    console.log('[SpeciesIndex] init()');\r\n\r\n    // bind your change\u2010handler once\r\n    if (!SpeciesEvents.bound) {\r\n      SpeciesEvents.bind();\r\n    }\r\n\r\n    // grab saved species from the builder data\r\n    const data = FormBuilderAPI.getData();\r\n\r\n    // always reload the dropdown\r\n    SpeciesAPI.loadSpeciesList(() => {\r\n      // after options are in place, re\u2010apply selection\r\n      if (data.profile && data.profile.species) {\r\n        $('#cg-species')\r\n          .val(data.profile.species)\r\n          .trigger('change');\r\n      }\r\n    });\r\n  }\r\n};\r\n", "// assets/js/src/core/skills/render.js\r\nimport FormBuilderAPI from '../formBuilder';\r\nimport SpeciesAPI     from '../species/api.js';\r\nimport CareerAPI      from '../career/api.js';\r\n\r\nconst $ = window.jQuery;\r\n\r\n// Map #marks \u2192 die\r\nconst MARK_DIE = {\r\n  1: 'd4',\r\n  2: 'd6',\r\n  3: 'd8'\r\n};\r\n\r\nexport default {\r\n  render() {\r\n    const skills  = window.CG_SKILLS_LIST || [];\r\n    const species = SpeciesAPI.currentProfile || {};\r\n    const career  = CareerAPI.currentProfile  || {};\r\n    const data    = FormBuilderAPI.getData();\r\n\r\n    data.skillMarks = data.skillMarks || {};\r\n    const MAX_MARKS = 13;\r\n    const usedMarks = Object.values(data.skillMarks)\r\n                          .reduce((sum, v) => sum + v, 0);\r\n    const marksRemain = Math.max(0, MAX_MARKS - usedMarks);\r\n\r\n    // Inject remaining\u2010marks display\r\n    $('#marks-remaining').remove();\r\n    $('#skills-table').before(`\r\n      <div id=\"marks-remaining\" class=\"marks-remaining\">\r\n        Marks Remaining: <strong>${marksRemain}</strong>\r\n      </div>\r\n    `);\r\n\r\n    // Build table header\r\n    const $thead = $('<thead>');\r\n    $('<tr>')\r\n      .append('<th>Skill</th>')\r\n      .append(`<th>${species.speciesName || ''}</th>`)\r\n      .append(`<th>${career.careerName || ''}</th>`)\r\n      .append('<th>Marks</th>')\r\n      .append('<th>Dice Pool</th>')\r\n      .appendTo($thead);\r\n\r\n    // Rows\r\n    const spSkills = [species.skill_one, species.skill_two, species.skill_three].map(String);\r\n    const cpSkills = [career.skill_one,  career.skill_two,  career.skill_three ].map(String);\r\n    const $tbody = $('<tbody>');\r\n\r\n    skills.forEach(skill => {\r\n      const id   = String(skill.id);\r\n      const name = skill.name;\r\n\r\n      // base dice\r\n      const spDie = spSkills.includes(id) ? 'd4' : '';\r\n      const cpDie = cpSkills.includes(id) ? 'd6' : '';\r\n\r\n      // mark buttons: empty content, active if mark index \u2264 myMarks\r\n      const myMarks = data.skillMarks[id] || 0;\r\n      let buttonsHtml = '';\r\n      [1,2,3].forEach(n => {\r\n        // disable any button above remaining budget\r\n        const disabled = (usedMarks >= MAX_MARKS && myMarks < n) ? ' disabled' : '';\r\n        const active   = myMarks >= n ? ' active' : '';\r\n        buttonsHtml += `<button\r\n          type=\"button\"\r\n          class=\"skill-mark-btn${active}\"\r\n          data-skill-id=\"${id}\"\r\n          data-mark=\"${n}\"\r\n          ${disabled}\r\n        ></button>`;\r\n      });\r\n\r\n      const markDie    = myMarks ? MARK_DIE[myMarks] : '';\r\n      const markDisplay = markDie || '\u2013';\r\n\r\n      // dice pool = species + career + marks\r\n      const poolDice = [spDie, cpDie, markDie].filter(Boolean);\r\n      const poolStr  = poolDice.length ? poolDice.join(' + ') : '\u2013';\r\n\r\n      const $row = $('<tr>')\r\n        .append(`<td>${name}</td>`)\r\n        .append(`<td>${spDie || '\u2013'}</td>`)\r\n        .append(`<td>${cpDie || '\u2013'}</td>`)\r\n        .append(`<td>\r\n                   <div class=\"marks-buttons\">${buttonsHtml}</div>\r\n                   <div class=\"marks-display\">${markDisplay}</div>\r\n                 </td>`)\r\n        .append(`<td>${poolStr}</td>`);\r\n\r\n      $tbody.append($row);\r\n    });\r\n\r\n    // Inject into DOM\r\n    $('#skills-table')\r\n      .empty()\r\n      .append($thead)\r\n      .append($tbody);\r\n  }\r\n};\r\n", "// assets/js/src/core/career/render.js\r\n\r\nimport SkillsRender from '../skills/render.js';\r\n\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  /**\r\n   * Render the three career gifts into your UI and then\r\n   * re-render the Skills table so the career dice appear.\r\n   */\r\n  renderGifts(profile) {\r\n    // Build an array of gift labels + names, filtering out any empty slots\r\n    const gifts = [\r\n      { label: 'Career Gift One',   name: profile.gift_1 },\r\n      { label: 'Career Gift Two',   name: profile.gift_2 },\r\n      { label: 'Career Gift Three', name: profile.gift_3 }\r\n    ].filter(g => g.name);\r\n\r\n    // Turn each into an <li> matching your species template\r\n    const html = gifts\r\n      .map(g => `<li><strong>${g.label}:</strong> ${g.name}</li>`)\r\n      .join('');\r\n\r\n    // Dump into your <ul id=\"career-gifts\">\r\n    $('#career-gifts').html(html);\r\n\r\n    // Finally, refresh the Skills table\r\n    SkillsRender.render();\r\n  },\r\n\r\n  /**\r\n   * Clear the career\u2010gift UI and re-render Skills.\r\n   */\r\n  clearGifts() {\r\n    $('#career-gifts').empty();\r\n    // also clear the dropdown if you like:\r\n    $('#cg-career').val('');\r\n    SkillsRender.render();\r\n  }\r\n};\r\n", "// assets/js/src/core/career/events.js\r\n\r\nimport CareerAPI      from './api.js';\r\nimport CareerRender   from './render.js';\r\nimport SkillsRender   from '../skills/render.js';\r\nimport FormBuilderAPI from '../formBuilder';\r\nimport GiftsState     from '../../gifts/state.js';\r\nimport SpeciesRender  from '../species/render.js';\r\nimport TraitsService  from '../traits/service.js';\r\n\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  bound: false,\r\n\r\n  bind() {\r\n    if (this.bound) return;\r\n    this.bound = true;\r\n\r\n    $(document)\r\n      .off('change', '#cg-career')\r\n      .on('change', '#cg-career', () => this.handleCareerChange());\r\n  },\r\n\r\n  handleCareerChange() {\r\n    const careerId = $('#cg-career').val();\r\n    const data     = FormBuilderAPI.getData();\r\n\r\n    // Persist the raw selection\r\n    data.career = careerId;\r\n\r\n    // If cleared, wipe out gifts & recalc\r\n    if (!careerId) {\r\n      CareerAPI.currentProfile = null;\r\n\r\n      // Clear out any merged career fields\r\n      data.profile = {\r\n        ...(data.profile || {}),\r\n        careerName: '',\r\n        gift_1: null,\r\n        gift_2: null,\r\n        gift_3: null,\r\n        skill_one: null,\r\n        skill_two: null,\r\n        skill_three: null\r\n      };\r\n\r\n      CareerRender.clearGifts();\r\n      TraitsService.refreshAll();\r\n      SkillsRender.render();\r\n      return;\r\n    }\r\n\r\n    // Fetch the career profile\r\n    CareerAPI.loadGifts(careerId, profile => {\r\n      // Expose for trait logic\r\n      CareerAPI.currentProfile = profile;\r\n\r\n      // Merge full profile into data.profile\r\n      data.profile = { ...(data.profile || {}), ...profile };\r\n\r\n      // Build career-gifts list for trait boosts\r\n      const crGifts = [1, 2, 3].map(i => {\r\n        const id       = profile[`gift_id_${i}`];\r\n        const manifold = parseInt(profile[`manifold_${i}`], 10) || 1;\r\n        return id ? { id, ct_gifts_manifold: manifold } : null;\r\n      }).filter(Boolean);\r\n      GiftsState.setList(crGifts);\r\n\r\n      // 1) Render career gifts UI\r\n      CareerRender.renderGifts(profile);\r\n\r\n      // 2) Re-render species gifts (so they don\u2019t vanish)\r\n      const sp = data.profile || {};\r\n      if (sp.gift_id_1 || sp.gift_id_2 || sp.gift_id_3) {\r\n        SpeciesRender.renderGifts(sp);\r\n      }\r\n\r\n      // 3) Recalculate all trait boosts\r\n      TraitsService.refreshAll();\r\n\r\n      // 4) Finally, repaint the Skills tab\r\n      SkillsRender.render();\r\n    });\r\n  }\r\n};\r\n", "// career/index.js\r\nimport CareerAPI      from './api.js';\r\nimport CareerEvents   from './events.js';\r\nimport ExtraCareer    from './extra.js';\r\nimport FormBuilderAPI from '../formBuilder';\r\n\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  init() {\r\n    console.log('[CareerIndex] init()');\r\n\r\n    // bind onChange once\r\n    CareerEvents.bind();\r\n\r\n    // grab last\u2010saved career\r\n    const data = FormBuilderAPI.getData();\r\n\r\n    // always rebuild the dropdown then reapply selection\r\n    CareerAPI.loadList(() => {\r\n      if (data.career) {\r\n        $('#cg-career')\r\n          .val(data.career)\r\n          .trigger('change');\r\n      }\r\n    });\r\n\r\n    // rebuild any extra\u2010career slots\r\n   // ExtraCareer.init();\r\n  }\r\n};\r\n", "// assets/js/src/gifts/api.js\r\n\r\nimport State from './state.js';\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  fetchLocalKnowledge(cb) {\r\n    $.post(CG_Ajax.ajax_url, {\r\n      action:   'cg_get_local_knowledge',\r\n      security: CG_Ajax.nonce\r\n    }).done(res => {\r\n      if (res.success && typeof cb === 'function') cb(res.data);\r\n    });\r\n  },\r\n\r\n  fetchLanguageGift(cb) {\r\n    $.post(CG_Ajax.ajax_url, {\r\n      action:   'cg_get_language_gift',\r\n      security: CG_Ajax.nonce\r\n    }).done(res => {\r\n      if (res.success && typeof cb === 'function') cb(res.data);\r\n    });\r\n  },\r\n\r\n  fetchFreeChoices(cb) {\r\n    $.post(CG_Ajax.ajax_url, {\r\n      action:   'cg_get_free_gifts',\r\n      security: CG_Ajax.nonce\r\n    }).done(res => {\r\n      if (!res.success || typeof cb !== 'function') return;\r\n\r\n      // Map each gift to ensure we have a numeric manifold count\r\n      const gifts = res.data.map(g => ({\r\n        // carry through all original fields\r\n        ...g,\r\n\r\n        // ensure id is string, name is present, and manifold is a Number\r\n        id: String(g.id),\r\n        name: g.name,\r\n        ct_gifts_manifold: parseInt(g.ct_gifts_manifold, 10) || 1\r\n      }));\r\n\r\n      cb(gifts);\r\n    });\r\n  }\r\n};\r\n", "import API from './api.js';\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  init() {\r\n    const $container = $('#cg-local-knowledge');\r\n    API.fetchLocalKnowledge(data => {\r\n      $container.text(data.name);\r\n    });\r\n  }\r\n};\r\n", "import API from './api.js';\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  init() {\r\n    const $container = $('#cg-language');\r\n    API.fetchLanguageGift(data => {\r\n      $container.text(data.name);\r\n    });\r\n  }\r\n};\r\n", "// assets/js/src/gifts/free-choices.js\r\n\r\nimport API from './api.js';\r\nimport State from './state.js';\r\nimport TraitsService from '../core/traits/service.js';\r\n\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  /**\r\n   * Initialize the three free-choice gift selectors,\r\n   * filter by requirements, and wire up change events.\r\n   */\r\n  init() {\r\n    // Load any previously saved picks\r\n    State.init();\r\n\r\n    // Fetch the full list of free-choice gift objects\r\n    API.fetchFreeChoices(gifts => {\r\n      // 1) Merge all into State (so manifold & requirements are stored)\r\n      State.setList(gifts);\r\n      console.log('[FreeChoices] State.gifts \u2192', State.gifts);\r\n      console.log('[FreeChoices] State.selected \u2192', State.selected);\r\n\r\n      // --- Filtering logic (unchanged) ---\r\n      const suffixes = [\r\n        '', 'two','three','four','five','six',\r\n        'seven','eight','nine','ten','eleven',\r\n        'twelve','thirteen','fourteen','fifteen',\r\n        'sixteen','seventeen','eighteen','nineteen'\r\n      ];\r\n      const selectedIds = State.selected.map(String);\r\n      const available = gifts.filter(g => {\r\n        return suffixes.every(s => {\r\n          const key = s\r\n            ? `ct_gifts_requires_${s}`\r\n            : 'ct_gifts_requires';\r\n          const req = g[key];\r\n          return !req || selectedIds.includes(String(req));\r\n        });\r\n      });\r\n      console.log('[FreeChoices] after filtering \u2192', available);\r\n\r\n      // --- Render dropdowns (unchanged) ---\r\n      const $wrap = $('#cg-free-choices').empty();\r\n      for (let i = 0; i < 3; i++) {\r\n        const selId = `cg-free-choice-${i}`;\r\n        const prev  = State.selected[i] || '';\r\n        const options = available.map(g => {\r\n          const sel = g.id == prev ? ' selected' : '';\r\n          return `<option value=\"${g.id}\"${sel}>${g.name}</option>`;\r\n        }).join('');\r\n        $wrap.append(`\r\n          <select id=\"${selId}\" data-index=\"${i}\">\r\n            <option value=\"\">\u2014 Select Gift \u2014</option>\r\n            ${options}\r\n          </select>\r\n        `);\r\n      }\r\n\r\n      // --- Bind change handlers ---\r\n      $(document)\r\n        .off('change', '#cg-free-choices select')\r\n        .on('change', '#cg-free-choices select', e => {\r\n          const $sel = $(e.currentTarget);\r\n          const idx  = $sel.data('index');\r\n          const id   = $sel.val();\r\n\r\n          // Persist the choice\r\n          State.set(idx, id);\r\n\r\n          // Merge the newly selected gift object into State\r\n          const chosen = gifts.find(g => String(g.id) === String(id));\r\n          if (chosen) {\r\n            State.setList([chosen]);\r\n          }\r\n\r\n          // Recalculate all trait boosts\r\n          TraitsService.refreshAll();\r\n        });\r\n    });\r\n  }\r\n};\r\n", "// assets/js/src/gifts/index.js\r\n\r\nimport State         from './state.js';\r\nimport API           from './api.js';\r\nimport localKnowledge from './local-knowledge.js';\r\nimport language       from './language.js';\r\nimport freeChoices    from './free-choices.js';\r\n\r\nexport default {\r\n  init() {\r\n    // Load the pre-set gifts\r\n    localKnowledge.init();\r\n    language.init();\r\n\r\n    // Then build the three free-choice dropdowns\r\n    freeChoices.init();\r\n  }\r\n};\r\n", "// assets/js/src/core/skills/events.js\r\n\r\nimport FormBuilderAPI from '../formBuilder';\r\nimport SkillsRender   from './render.js';\r\n\r\nconst $ = window.jQuery;\r\n\r\nexport default {\r\n  bind() {\r\n    // On tab click or species/career change, re-render\r\n    $(document)\r\n      .off('click', '#tab-skills, #cg-species, #cg-career')\r\n      .on('click change', '#tab-skills, #cg-species, #cg-career', () => {\r\n        SkillsRender.render();\r\n      });\r\n\r\n    // Handle mark\u2010button clicks\r\n    $(document)\r\n      .off('click', '.skill-mark-btn')\r\n      .on('click', '.skill-mark-btn', function() {\r\n        const skillId = String($(this).data('skill-id'));\r\n        const mark    = parseInt($(this).data('mark'), 10);\r\n        const data    = FormBuilderAPI.getData();\r\n\r\n        data.skillMarks = data.skillMarks || {};\r\n        data.skillMarks[skillId] = mark;\r\n\r\n        // Re-render to update buttons, marks remaining & dice pools\r\n        SkillsRender.render();\r\n      });\r\n  }\r\n};\r\n", "// assets/js/src/core/skills/index.js\r\n\r\nimport FormBuilderAPI from '../formBuilder';\r\nimport SkillsEvents   from './events.js';\r\nimport SkillsRender   from './render.js';\r\n\r\nexport default {\r\n  init() {\r\n    // 1) Logging the initial builder state\r\n    console.log('[SkillsIndex] init \u2014 builder state:', FormBuilderAPI._data);\r\n\r\n    // 2) Ensure we have the localized skills list\r\n    if (!Array.isArray(FormBuilderAPI._data.skillsList)) {\r\n      FormBuilderAPI._data.skillsList = window.CG_SKILLS_LIST || [];\r\n    }\r\n\r\n    // 3) Initialize marks\u2010allocation storage if missing\r\n    if (typeof FormBuilderAPI._data.skillMarks !== 'object') {\r\n      FormBuilderAPI._data.skillMarks = {};\r\n    }\r\n\r\n    // 4) Wire up click/change handlers for tab, species, career, and mark buttons\r\n    SkillsEvents.bind();\r\n\r\n    // 5) Initial render of the full skills table (headers, buttons, pools, marks remaining)\r\n    SkillsRender.render();\r\n  }\r\n};\r\n", "// Shared utilities for Summary\r\n\r\n/**\r\n * Capitalize first letter and replace underscores/dashes with spaces.\r\n */\r\nexport function capitalize(str) {\r\n  if (typeof str !== 'string') return '';\r\n  const cleaned = str.replace(/[_\\-]/g, ' ');\r\n  return cleaned.charAt(0).toUpperCase() + cleaned.slice(1);\r\n}\r\n\r\n/**\r\n * Given a die string like \"d8\", return half (rounded up) as a \"dX\".\r\n */\r\nexport function halfDie(die) {\r\n  if (typeof die !== 'string' || die[0] !== 'd') return '';\r\n  const n = parseInt(die.slice(1), 10);\r\n  return `d${Math.ceil(n / 2)}`;\r\n}\r\n\r\n/**\r\n * Maximum values for dice types.\r\n */\r\nexport const DIE_MAX = {\r\n  d4:  4,\r\n  d6:  6,\r\n  d8:  8,\r\n  d10: 10,\r\n  d12: 12\r\n};\r\n", "// assets/js/src/core/summary/api.js\r\n\r\nimport FormBuilderAPI from '../formBuilder';\r\nimport * as Utils     from './utils.js';\r\nimport TraitsService  from '../traits/service.js';\r\nimport SpeciesAPI     from '../species/api.js';\r\nimport CareerAPI      from '../career/api.js';\r\n\r\nconst $ = window.jQuery;\r\nconst TRAITS   = TraitsService.TRAITS;\r\nconst MARK_DIE = { 1: 'd4', 2: 'd6', 3: 'd8' };\r\n\r\nconst SummaryAPI = {\r\n  /**\r\n   * Entry point when the Summary tab is shown.\r\n   */\r\n  init() {\r\n    const data = FormBuilderAPI.getData();\r\n    console.log('[SummaryAPI] init \u2014 builder state:', data);\r\n\r\n    // 1) Render all summary sections\r\n    this.renderSummary(data);\r\n\r\n    // 2) Wire up the Export to PDF button\r\n    this.bindExportButton();\r\n  },\r\n\r\n  /**\r\n   * Build and inject the full summary into #cg-summary-sheet.\r\n   */\r\n  renderSummary(data = {}) {\r\n    const $sheet = $('#cg-summary-sheet').empty();\r\n\r\n    // Basic Info\r\n    const name   = data.name   || '\u2014';\r\n    const age    = data.age    || '\u2014';\r\n    const gender = data.gender || '\u2014';\r\n    const motto  = data.motto  || '\u2014';\r\n\r\n    // Goals\r\n    const goals = [1, 2, 3]\r\n      .map(i => data[`goal${i}`] || '\u2014')\r\n      .filter(v => v !== '\u2014')\r\n      .join(', ')\r\n      || '\u2014';\r\n\r\n    // Description & Backstory\r\n    const description = data.description || '\u2014';\r\n    const backstory   = data.backstory   || '\u2014';\r\n\r\n    // Species & Career\r\n    const species = SpeciesAPI.currentProfile || {};\r\n    const career  = CareerAPI.currentProfile  || {};\r\n\r\n    // Skills, Marks, Battle\r\n    const skills = window.CG_SKILLS_LIST || [];\r\n    const marks  = data.skillMarks  || {};\r\n    const battle = data.battle      || [];\r\n\r\n    // Assemble HTML\r\n    let html = `\r\n      <div class=\"summary-section summary-basic\">\r\n        <h2>${name}</h2>\r\n        <p><strong>Age:</strong> ${age}</p>\r\n        <p><strong>Gender:</strong> ${gender}</p>\r\n        <p><strong>Motto:</strong> ${motto}</p>\r\n      </div>\r\n\r\n      <div class=\"summary-section summary-goals\">\r\n        <p><strong>Goals:</strong> ${goals}</p>\r\n      </div>\r\n\r\n      <div class=\"summary-section summary-description\">\r\n        <p><strong>Description:</strong> ${description}</p>\r\n      </div>\r\n\r\n      <div class=\"summary-section summary-backstory\">\r\n        <p><strong>Backstory:</strong> ${backstory}</p>\r\n      </div>\r\n\r\n      <div class=\"summary-section summary-species\">\r\n        <h3>Species: ${species.speciesName || '\u2014'}</h3>\r\n        <ul>\r\n    `;\r\n    ['gift_1','gift_2','gift_3'].forEach((_, idx) => {\r\n      const gift = species[`gift_${idx+1}`];\r\n      const mult = species[`manifold_${idx+1}`] || 1;\r\n      if (gift) {\r\n        html += `<li><strong>Gift ${idx+1}:</strong> ${gift} \u00D7 ${mult}</li>`;\r\n      }\r\n    });\r\n    html += `</ul></div>`;\r\n\r\n    html += `\r\n      <div class=\"summary-section summary-career\">\r\n        <h3>Career: ${career.careerName || '\u2014'}</h3>\r\n        <ul>\r\n    `;\r\n    ['gift_1','gift_2','gift_3'].forEach((_, idx) => {\r\n      const gift = career[`gift_${idx+1}`];\r\n      const mult = career[`manifold_${idx+1}`] || 1;\r\n      if (gift) {\r\n        html += `<li><strong>Gift ${idx+1}:</strong> ${gift} \u00D7 ${mult}</li>`;\r\n      }\r\n    });\r\n    html += `</ul></div>`;\r\n\r\n    html += `\r\n      <div class=\"summary-section summary-traits\">\r\n        <h3>Traits</h3>\r\n        <ul>\r\n    `;\r\n    TRAITS.forEach(key => {\r\n      let label = key.replace(/^trait_/, '');\r\n      if (label === 'species') label = 'Species';\r\n      else if (label === 'career') label = 'Career';\r\n      else label = Utils.capitalize(label);\r\n\r\n      const base  = data[key] || '\u2014';\r\n      const boost = TraitsService.getBoostedDie(key);\r\n      const display = boost ? `${base} \u2192 ${boost}` : base;\r\n\r\n      html += `<li><strong>${label}:</strong> ${display}</li>`;\r\n    });\r\n    html += `</ul></div>`;\r\n\r\n    html += `\r\n      <div class=\"summary-section summary-skills\">\r\n        <h3>Skills</h3>\r\n        <table class=\"cg-summary-skills\">\r\n          <thead><tr><th>Skill</th><th>Dice Pool</th></tr></thead>\r\n          <tbody>\r\n    `;\r\n    const spIds = [species.skill_one, species.skill_two, species.skill_three].map(String);\r\n    const cpIds = [career.skill_one,  career.skill_two,  career.skill_three].map(String);\r\n\r\n    skills.forEach(skill => {\r\n      const id = String(skill.id);\r\n      const sp = spIds.includes(id) ? 'd4' : '';\r\n      const cp = cpIds.includes(id) ? 'd6' : '';\r\n      const mk = MARK_DIE[marks[id]] || '';\r\n      const pool = [sp, cp, mk].filter(Boolean).join(' + ') || '\u2014';\r\n      html += `<tr><td>${skill.name}</td><td>${pool}</td></tr>`;\r\n    });\r\n    html += `\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    `;\r\n\r\n    if (battle.length) {\r\n      html += `\r\n        <div class=\"summary-section summary-battle\">\r\n          <h3>Battle</h3>\r\n          <ul>\r\n      `;\r\n      battle.forEach(item => {\r\n        html += `<li><strong>${Utils.capitalize(item.key)}:</strong> ${item.value}</li>`;\r\n      });\r\n      html += `</ul></div>`;\r\n    }\r\n\r\n    // Inject all HTML\r\n    $sheet.html(html);\r\n  },\r\n\r\n  /**\r\n   * Open a new window, inject the summary + CSS, and print it.\r\n   */\r\n  bindExportButton() {\r\n    $(document)\r\n      .off('click', '#cg-export-pdf')\r\n      .on('click', '#cg-export-pdf', e => {\r\n        e.preventDefault();\r\n        console.log('[SummaryAPI] Export to PDF clicked');\r\n\r\n        // 1) Grab the summary HTML\r\n        const sheetHtml = document\r\n          .getElementById('cg-summary-sheet')\r\n          .outerHTML;\r\n\r\n        // 2) Collect current <link rel=\"stylesheet\"> tags\r\n        const cssLinks = Array.from(\r\n          document.querySelectorAll('link[rel=\"stylesheet\"]')\r\n        )\r\n        .map(link => link.outerHTML)\r\n        .join('\\n');\r\n\r\n        // 3) Open a print window and write minimal HTML\r\n        const printWin = window.open('', '_blank', 'width=800,height=600');\r\n        printWin.document.open();\r\n        printWin.document.write(`\r\n          <!doctype html>\r\n          <html>\r\n            <head>\r\n              <meta charset=\"utf-8\">\r\n              <title>Character Sheet</title>\r\n              ${cssLinks}\r\n              <style>\r\n                @page { margin: 1cm; }\r\n                body { margin:0; padding:0; }\r\n              </style>\r\n            </head>\r\n            <body>\r\n              ${sheetHtml}\r\n            </body>\r\n          </html>\r\n        `);\r\n        printWin.document.close();\r\n        printWin.focus();\r\n\r\n        // 4) Trigger print and close window\r\n        setTimeout(() => {\r\n          printWin.print();\r\n          printWin.close();\r\n        }, 300);\r\n      });\r\n  }\r\n};\r\n\r\nexport default SummaryAPI;\r\n", "// assets/js/src/core/summary/index.js\r\n\r\nimport SummaryAPI from './api.js';\r\n\r\nexport default {\r\n  init() {\r\n    SummaryAPI.init();\r\n  }\r\n};\r\n", "import TraitsAPI      from '../traits';\r\nimport SpeciesIndex   from '../species';\r\nimport CareerIndex    from '../career';\r\nimport GiftsAPI       from '../../gifts';\r\nimport SkillsAPI      from '../skills';\r\nimport SummaryAPI     from '../summary';\r\n\r\nconst $ = window.jQuery;\r\n\r\n// Only re-init the active tab\u2019s logic (no DOM\u2192state merging here)\r\nexport default function refreshTab() {\r\n  const tab = $('#cg-modal .cg-tabs li.active').data('tab');\r\n\r\n  switch (tab) {\r\n    case 'tab-traits':\r\n      TraitsAPI.init();\r\n      break;\r\n    case 'tab-profile':\r\n      SpeciesIndex.init();\r\n      CareerIndex.init();\r\n      GiftsAPI.init();\r\n      break;\r\n    case 'tab-skills':\r\n      SkillsAPI.init();\r\n      break;\r\n    case 'tab-summary':\r\n      SummaryAPI.init();\r\n      break;\r\n  }\r\n}\r\n", "// assets/js/src/core/main/builder-load.js\r\nimport BuilderUI      from './builder-ui.js';\r\nimport FormBuilderAPI from '../formBuilder';\r\n\r\nconst $ = window.jQuery;\r\n\r\nexport default function bindLoadEvents() {\r\n  //\r\n  // 1) Confirm load \u2014 this is your \u201CLoad\u201D button inside the splash\r\n  //\r\n  $(document)\r\n    .off('click', '#cg-load-confirm')\r\n    .on('click', '#cg-load-confirm', e => {\r\n      e.preventDefault();\r\n      const charId = $('#cg-splash-load-select').val();\r\n      if (!charId) {\r\n        alert('Please select a character.');\r\n        return;\r\n      }\r\n\r\n      console.log('[BuilderLoad] #cg-load-confirm clicked \u2192 fetch ID', charId);\r\n      FormBuilderAPI.fetchCharacter(charId)\r\n        .done(res => {\r\n          const parsed  = typeof res === 'string' ? JSON.parse(res) : res;\r\n          const record  = parsed.data || parsed;\r\n          if (!record || !record.id) {\r\n            alert('Could not load character.');\r\n            return;\r\n          }\r\n\r\n          $('#cg-modal-splash')\r\n            .removeClass('visible')\r\n            .addClass('cg-hidden');\r\n\r\n          BuilderUI.openBuilder({\r\n            isNew:   false,\r\n            payload: record\r\n          });\r\n        })\r\n        .fail((xhr, status, err) => {\r\n          console.error('[BuilderLoad] fetchCharacter failed:', xhr.responseText);\r\n          alert('Load error. See console.');\r\n        });\r\n    });\r\n\r\n  //\r\n  // 2) Back button\r\n  //\r\n  $(document)\r\n    .off('click', '#cg-splash-back')\r\n    .on('click', '#cg-splash-back', e => {\r\n      e.preventDefault();\r\n      console.log('[BuilderLoad] #cg-splash-back clicked \u2192 show NEW form');\r\n      BuilderUI.openBuilder({ isNew: true });\r\n    });\r\n}\r\n", "// assets/js/src/core/main/builder-save.js\r\n\r\nimport BuilderUI      from './builder-ui.js';\r\nimport FormBuilderAPI from '../formBuilder';\r\nconst $ = window.jQuery;\r\n\r\nexport default function bindSaveEvents() {\r\n  // Both \u201CSave\u201D and \u201CSave & Close\u201D buttons use the .cg-save-button class\r\n  $(document)\r\n    .off('click', '.cg-save-button')\r\n    .on('click', '.cg-save-button', function(e) {\r\n      e.preventDefault();\r\n\r\n      // Detect if this click should close after saving\r\n      const closeAfter = $(this).hasClass('cg-close-after-save');\r\n\r\n      // Collect the full form payload in one go\r\n      const payload = FormBuilderAPI.collectFormData();\r\n      console.log('[BuilderSave] \u25B6 saving payload:', payload);\r\n\r\n      // Send to your AJAX handler\r\n      $.post(CG_Ajax.ajax_url, {\r\n        action:    'cg_save_character',\r\n        character: payload,\r\n        security:  CG_Ajax.nonce\r\n      })\r\n      .done(res => {\r\n        if (!res.success) {\r\n          console.error('[BuilderSave] server error:', res.data);\r\n          return alert('Save error: ' + res.data);\r\n        }\r\n\r\n        // Merge the returned ID into our in-memory state\r\n        payload.id = res.data.id;\r\n        FormBuilderAPI._data = { ...FormBuilderAPI._data, ...payload };\r\n\r\n        // Mark clean and either close or stay open\r\n        BuilderUI.markClean();\r\n        if (closeAfter) {\r\n          BuilderUI.closeBuilder();\r\n        } else {\r\n          alert('Character saved');\r\n        }\r\n      })\r\n      .fail((xhr, err) => {\r\n        console.error('[BuilderSave] AJAX error:', err);\r\n        alert('AJAX save error \u2014 see console');\r\n      });\r\n    });\r\n}\r\n", "import BuilderUI       from './builder-ui.js';\r\nimport FormBuilderAPI  from '../formBuilder';\r\nimport refreshTab      from './builder-refresh.js';\r\nimport bindLoadEvents  from './builder-load.js';\r\nimport bindSaveEvents  from './builder-save.js';\r\nimport TraitsAPI       from '../traits';\r\nimport SpeciesIndex    from '../species';\r\nimport CareerIndex     from '../career';\r\nimport GiftsAPI        from '../../gifts';\r\nimport SkillsAPI       from '../skills';\r\nimport SummaryAPI      from '../summary';\r\n\r\nconst $ = window.jQuery;\r\n\r\nexport default function bindUIEvents() {\r\n  console.log('[BuilderEvents] bindUIEvents() called');\r\n\r\n  // 1) Mark form dirty on change & sync into FormBuilderAPI._data\r\n  $(document)\r\n    .off('input change', '#cg-modal input, #cg-modal select, #cg-modal textarea')\r\n    .on('input change', '#cg-modal input, #cg-modal select, #cg-modal textarea', function() {\r\n      BuilderUI.markDirty();\r\n\r\n      const $el = $(this);\r\n\r\n      // Skill-marks inputs don\u2019t have an ID, so handle them explicitly\r\n      if ($el.hasClass('skill-marks')) {\r\n        const skillId = $el.data('skill-id');\r\n        const val     = parseInt($el.val(), 10) || 0;\r\n        FormBuilderAPI._data.skillMarks = FormBuilderAPI._data.skillMarks || {};\r\n        FormBuilderAPI._data.skillMarks[skillId] = val;\r\n        return;\r\n      }\r\n\r\n      // All other fields map by stripping \u201Ccg-\u201D off the ID\r\n      const id  = this.id;     // e.g. \u201Ccg-name\u201D, \u201Ccg-body\u201D, \u201Ccg-species\u201D\r\n      if (!id) return;\r\n      const key = id.replace(/^cg-/, '');\r\n      FormBuilderAPI._data[key] = $el.val();\r\n    });\r\n\r\n  // 2) Show splash with character dropdown\r\n  $(document)\r\n    .off('click', '#cg-open-builder')\r\n    .on('click', '#cg-open-builder', e => {\r\n      e.preventDefault();\r\n      $('#cg-modal-splash').removeClass('cg-hidden').addClass('visible');\r\n      FormBuilderAPI.listCharacters()\r\n        .done(resp => {\r\n          const $sel = $('#cg-splash-load-select').empty();\r\n          resp.data.forEach(c => {\r\n            $sel.append(`<option value=\"${c.id}\">${c.name}</option>`);\r\n          });\r\n        });\r\n    });\r\n\r\n  // 3) Open blank builder (NEW CHARACTER) and purge previous state\r\n  $(document)\r\n    .off('click', '#cg-new-splash')\r\n    .on('click', '#cg-new-splash', e => {\r\n      e.preventDefault();\r\n\r\n      // Hide the splash\r\n      $('#cg-modal-splash').removeClass('visible').addClass('cg-hidden');\r\n\r\n      // Clear all builder state\r\n      BuilderUI.openBuilder({ isNew: true, payload: {} });\r\n\r\n      // Reset skill marks\r\n      FormBuilderAPI._data.skillMarks = {};\r\n\r\n      // Reset species/career\r\n      FormBuilderAPI._data.species = '';\r\n      FormBuilderAPI._data.career  = '';\r\n\r\n      // Reset gifts state\r\n      if (window.CG_FreeChoicesState) {\r\n        window.CG_FreeChoicesState.selected = ['', '', ''];\r\n        window.CG_FreeChoicesState.gifts    = [];\r\n      }\r\n    });\r\n\r\n  // 4) Load character by ID and launch builder\r\n  $(document)\r\n    .off('click', '#cg-load-splash')\r\n    .on('click', '#cg-load-splash', e => {\r\n      e.preventDefault();\r\n      const charId = $('#cg-splash-load-select').val();\r\n      if (!charId) {\r\n        alert('Please select a character to load.');\r\n        return;\r\n      }\r\n\r\n      FormBuilderAPI.fetchCharacter(charId)\r\n        .done(resp => {\r\n          console.log('\uD83D\uDD0E [AJAX] raw cg_get_character response:', resp);\r\n          const parsed = typeof resp === 'string' ? JSON.parse(resp) : resp;\r\n          console.log('\uD83D\uDD0D [AJAX] parsed.data:', parsed.data);\r\n\r\n          const record = parsed.data || parsed;\r\n          if (!record || !record.id) {\r\n            return alert('Character could not be loaded.');\r\n          }\r\n\r\n          // Hide the splash, open builder, and seed state from record\r\n          $('#cg-modal-splash')\r\n            .removeClass('visible')\r\n            .addClass('cg-hidden');\r\n\r\n          BuilderUI.openBuilder({\r\n            isNew:   false,\r\n            payload: record\r\n          });\r\n        })\r\n        .fail((xhr, status, err) => {\r\n          console.error('Load failed:', xhr.responseText);\r\n          alert('Could not load character. Check console for details.');\r\n        });\r\n    });\r\n\r\n  // 5) Wire up Save & Load inside builder\r\n  bindLoadEvents();\r\n  bindSaveEvents();\r\n\r\n  // 6) Tab navigation \u2192 highlight panel + run refreshTab()\r\n  $(document)\r\n    .off('click', '#cg-modal .cg-tabs li')\r\n    .on('click', '#cg-modal .cg-tabs li', function(e) {\r\n      e.preventDefault();\r\n      const tabName = $(this).data('tab');\r\n\r\n      $('#cg-modal .cg-tabs li').removeClass('active');\r\n      $(this).addClass('active');\r\n\r\n      $('.tab-panel').removeClass('active');\r\n      $(`#${tabName}`).addClass('active');\r\n\r\n      refreshTab();\r\n    });\r\n\r\n  // 7a) Modal close (X)\r\n  $(document)\r\n    .off('click', '#cg-modal-close')\r\n    .on('click', '#cg-modal-close', e => {\r\n      e.preventDefault();\r\n      BuilderUI.showUnsaved();\r\n    });\r\n\r\n  // 7b) Modal overlay click\r\n  $(document)\r\n    .off('click', '#cg-modal-overlay')\r\n    .on('click', '#cg-modal-overlay', function(e) {\r\n      if (e.target !== this) return;\r\n      BuilderUI.showUnsaved();\r\n    });\r\n\r\n  // 7c) Prompt: Save & Exit\r\n  $(document)\r\n    .off('click', '#unsaved-save')\r\n    .on('click', '#unsaved-save', e => {\r\n      e.preventDefault();\r\n      console.log('[BuilderEvents] Prompt: SAVE & EXIT clicked');\r\n      FormBuilderAPI.save(true);\r\n    });\r\n\r\n  // 7d) Prompt: Exit Without Save\r\n  $(document)\r\n    .off('click', '#unsaved-exit')\r\n    .on('click', '#unsaved-exit', e => {\r\n      e.preventDefault();\r\n      BuilderUI.closeBuilder();\r\n    });\r\n\r\n  // 7e) Prompt: Cancel\r\n  $(document)\r\n    .off('click', '#unsaved-cancel')\r\n    .on('click', '#unsaved-cancel', e => {\r\n      e.preventDefault();\r\n      BuilderUI.hideUnsaved();\r\n    });\r\n}\r\n", "// assets/js/src/core/main/index.js\r\n\r\nimport bindUIEvents from './builder-events.js';\r\n\r\nconst MainAPI = {\r\n  init() {\r\n    console.log('[MainAPI] init() called');\r\n    // now bind all your UI events\r\n    bindUIEvents();\r\n  }\r\n};\r\n\r\nexport default MainAPI;\r\n", "import MainAPI from './main';\r\n\r\nconst Core = {\r\n  init() {\r\n    console.log('[Core] init() called');           // \u2190 you should see this\r\n    MainAPI.init();\r\n  }\r\n};\r\n\r\n// log when the bundle loads\r\nconsole.log('[Core] bundle loaded');\r\n\r\n// fire when DOM is ready\r\nif (document.readyState === 'loading') {\r\n  document.addEventListener('DOMContentLoaded', Core.init);\r\n} else {\r\n  Core.init();\r\n}\r\n\r\nimport SkillsModule from './skills/index.js';\r\n// \u2026 other imports \u2026\r\n\r\nexport default function initCore() {\r\n  // \u2026 existing binds \u2026\r\n  SkillsModule.init();\r\n  // \u2026 builder\u2010events \u2026\r\n}\r\n"],
  "mappings": "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",
  "names": ["$", "api_default", "api_default", "$", "TRAITS", "escape", "api_default", "_a", "$", "$", "$", "$", "$", "$", "events_default", "$", "events_default", "$", "render_default", "api_default", "$", "render_default", "$", "events_default", "api_default", "render_default", "$", "events_default", "api_default", "$", "api_default", "$", "api_default", "$", "api_default", "$", "api_default", "$", "events_default", "render_default", "events_default", "render_default", "capitalize", "$", "TRAITS", "MARK_DIE", "api_default", "capitalize", "api_default", "$", "$", "$", "$"]
}
